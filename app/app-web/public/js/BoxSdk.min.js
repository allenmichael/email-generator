!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fetch")):"function"==typeof define&&define.amd?define("BoxSdk",["fetch"],t):"object"==typeof exports?exports.BoxSdk=t(require("fetch")):e.BoxSdk=t(e.fetch)}(this,function(e){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(1),s=(r(a),o(3)),l=r(s),u=o(31),p=r(u),c=function(){function e(){n(this,e),this._BasicBoxClient=l["default"],this._PersistentBoxClient=p["default"]}return i(e,[{key:"BasicBoxClient",get:function(){return this._BasicBoxClient}},{key:"PersistentBoxClient",get:function(){return this._PersistentBoxClient}}]),e}();t["default"]=c,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){function t(e){if(!e.ok){var t=new Error(e.statusText);return e.json().then(function(e){throw t.response=e,t})}return e}function o(e){if(204!==e.status)return e.json()}return e.upload?new Promise(function(t,o){var r=new XMLHttpRequest,n=e.url,i=e.method;r.open(i,n,!0),e.headers&&(e.headers["Content-Type"]&&delete e.headers["Content-Type"],Object.keys(e.headers).forEach(function(t){r.setRequestHeader(t,e.headers[t])})),r.send(e.body),r.onload=function(){if(this.status>=200&&this.status<300)t(JSON.parse(this.response));else{var e=new Error(this.statusText);e.response=JSON.parse(this.response),o(e)}},r.onerror=function(){var e=new Error(this.statusText);e.response=JSON.parse(this.response),o(e)}}):fetch(e.url,e).then(t).then(o)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,o(2),e.exports=t["default"]},function(t,o){t.exports=e},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(4),u=r(l),p=o(6),c=r(p),_=function(e){function t(e){return n(this,t),e=e||{},i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"makeRequest",value:function(e,t){return t=t||{},t.url=t.url||""+this._baseApiUrl+e,t.headers=this._handleAuthorization(t),t.params=this._applyFields(t),this._checkForEmptyObjects(t),t=this._formatOptions(t),this._returnsOnlyOptions?(t.upload&&(t.headers["Content-Type"]=void 0,delete t.upload),t):this.httpService.defaults&&t.upload?this._handleAngularFileUpload(this.httpService,t):this.httpService(t)}},{key:"removeAccessTokenAndRerunRequest",value:function(e,t,o){return o=o||!1,e.setAsNewAccessToken&&(o=e.setAsNewAccessToken,delete e.setAsNewAccessToken),t||(t=this._checkTokenType(e,!0)),e.headers&&e.headers[c["default"].HEADER_AUTHORIZATION]&&delete e.headers[c["default"].HEADER_AUTHORIZATION],this.removeAccessToken(),o&&(this.removeAccessToken(),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!0),e.headers=this._handleAuthorization(e,t),e=this._formatOptions(e),BoxHttp(e)}},{key:"removeAccessToken",value:function(){this._accessToken=null,this._hasStoredAccessToken=!1}}]),t}(u["default"]);t["default"]=_,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),s=o(5),l=r(s),u=o(14),p=r(u),c=o(22),_=r(c),f=o(23),d=r(f),y=o(24),h=r(y),b=o(25),g=r(b),O=o(26),m=r(O),v=o(27),T=r(v),k=o(28),E=r(k),P=o(29),S=r(P),I=o(30),j=r(I),A=o(6),w=r(A),R=o(1),M=r(R),V=function(){function e(t){n(this,e),this._folders=new l["default"](this),this._files=new p["default"](this),this._webLinks=new _["default"](this),this._collaborations=new d["default"](this),this._collections=new h["default"](this),this._comments=new g["default"](this),this._groups=new m["default"](this),this._metadata=new T["default"](this),this._search=new E["default"](this),this._tasks=new S["default"](this),this._users=new j["default"](this),this._baseApiUrl=t.baseUrl||"https://api.box.com/2.0",this._returnsOnlyOptions=!(!t.hasOwnProperty("noRequestMode")||t.noRequestMode!==!0),this._skipValidation=!(!t.hasOwnProperty("skipValidation")||t.skipValidation!==!0),this._simpleMode=!(!t.hasOwnProperty("simpleMode")||t.simpleMode!==!0),this._accessToken=this._checkTokenType(t),this._hasStoredAccessToken=!!this._accessToken,this.httpService=t.httpService||M["default"],this.Promise=t.Promise||Promise}return a(e,[{key:"_checkTokenType",value:function(e,t){if(t=t||!1,e&&"string"==typeof e)return e;var o=void 0;return e&&"object"===("undefined"==typeof e?"undefined":i(e))&&(e.hasOwnProperty("accessToken")&&(o=e.accessToken,t&&delete e.accessToken),e.hasOwnProperty("access_token")&&(o=e.access_token,t&&delete e.access_token)),o}},{key:"_handleAuthorization",value:function(e,t){if(t)return this._constructHeaders(e,t);if(e&&e.accessToken||e.access_token){var o=e.accessToken||e.access_token;return e.accessToken?delete e.accessToken:delete e.access_token,this._constructHeaders(e,o)}if(this._hasStoredAccessToken)return this._constructHeaders(e,this._accessToken);var r=this._checkTokenType(e,!0);return this._constructHeaders(e,r)}},{key:"_constructHeaders",value:function(e,t){var o={};return t&&(o[w["default"].HEADER_AUTHORIZATION]=this._constructAuthorizationHeader(t)),e.headers&&Object.assign(o,e.headers),o}},{key:"_constructAuthorizationHeader",value:function(e){return""+w["default"].HEADER_AUTHORIZATION_PREFIX+e}},{key:"_checkForEmptyObjects",value:function(e){var t=this;Object.keys(e).map(function(o){"body"!==o&&"upload"!==o&&t._isEmpty(e[o])&&delete e[o]})}},{key:"_isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"_applyFields",value:function(e){return e.params=e.params||{},e.fields&&(e.params.fields=e.fields,delete e.fields),e.params}},{key:"_formatOptions",value:function(e){var t={},o=e.url;return e.params&&(o+="?",o+=Object.keys(e.params).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e.params[t])}).join("&")),t.url=o,t.headers=e.headers,e.upload?(e.headers["Content-Type"]="multipart/form-data",e.mode="cors",e):(e.body&&"object"===i(e.body)&&!e.upload&&(t.body=JSON.stringify(e.body),t.headers["Content-Type"]||(t.headers["Content-Type"]="application/json;charset=UTF-8")),t.method=e.method,t.data=e.body,t.mode="cors",t)}},{key:"_handleAngularFileUpload",value:function(e,t){return t.headers["Content-Type"]=void 0,e.post(t.url,t.body,{headers:t.headers})}},{key:"folders",get:function(){return this._folders}},{key:"files",get:function(){return this._files}},{key:"webLinks",get:function(){return this._webLinks}},{key:"collaborations",get:function(){return this._collaborations}},{key:"collections",get:function(){return this._collections}},{key:"comments",get:function(){return this._comments}},{key:"groups",get:function(){return this._groups}},{key:"metadata",get:function(){return this._metadata}},{key:"search",get:function(){return this._search}},{key:"tasks",get:function(){return this._tasks}},{key:"users",get:function(){return this._users}}]),e}();t["default"]=V,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function T(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:T(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=r(c),f=o(8),d=r(f),y=o(9),h=r(y),b=o(10),g=r(b),O="/folders",m={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PASSWORD:"shared_link.password",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags"},v=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m))}return a(t,e),s(t,[{key:"_getFolder",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.folder?(r||(0,_["default"])(e.folder,o),n||(0,h["default"])(e.folder,this.FLATTENED_VALUES),e.body=(0,d["default"])(e.folder,this.ALL_VALUES,n),delete e.folder):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getItems",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o+"/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getCollaborations",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o+"/collaborations";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedItems",value:function(e){e=e||{};var t=O+"/trash/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"getTrashedFolder",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[m.PARENT,m.ID,m.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,o,r,n)}var i=""+O;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,n)}var i=O+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"copy",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[REQUIRED_VALUES.PARENT,REQUIRED_VALUES.ID],r,n),e.newName&&(e.body.name=e.newName,delete e.newName)}var i=O+"/"+o+"/copy";return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"createSharedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,O,this.FLATTENED_VALUES)}},{key:"updateCollections",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);e.collections&&(e.body.collections=e.collections,delete e.collections);var r=O+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFolder(e,[],r,n)}var i=O+"/"+o;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{},e.params=e.params||{},e.params.recursive=e.params.recursive||!0;var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=O+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(g["default"]);t["default"]=v,e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={HEADER_AUTHORIZATION:"Authorization",HEADER_AUTHORIZATION_PREFIX:"Bearer ",HTTP_VERBS:{GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",OPTIONS:"OPTIONS"},MODES:{SKIP_VALIDATION:"skipValidation",IGNORE_MODEL_VALUES:"ignoreModelValues"},FOLDER:"folder",FOLDER_ID:"folderId",FILE:"file",FILE_ID:"fileId",VERSION:"version",VERSION_ID:"versionId",COMMENT:"comment",COMMENT_ID:"commentId",BOX_TOKEN_STORAGE_KEY:"box_token"},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){if(t=t||[],0!==t.length){var o=e;t.map(function(t){if(t.indexOf(".")!==-1){for(var r=t.split("."),n=0,i=r.length;n<i;n++){var a=r[n];o.hasOwnProperty(a)&&(o=o[a])}if(!o)throw new Error("A(n) "+t+" field is required for this API call")}else if(!e[t])throw new Error("A(n) "+t+" field is required for this API call")})}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,o){return o=o||!1,t=t||[],o?(Object.keys(e).map(function(t){"body"!==t&&(e.body[t]=e[t],delete e[t])}),e.body):0===t.length&&o===!1?{}:(e.body=e.body||{},Object.keys(e).map(function(o){t.indexOf(o)!==-1&&"body"!==o&&(e.body[o]=e[o],delete e[o])}),e.body)},e.exports=t["default"]},function(e,t){"use strict";function o(e,t){t=t||[],Object.keys(e).map(function(n){if(t.indexOf(n)===-1){"object"===r(e[n])&&o(e[n],t);var i=n.split(/(?=[A-Z])/g);if(i.length>1){for(var a=[],s=1;s<i.length;s++)a.push(i[s].toLowerCase());i.length>0&&a.unshift(i[0]);var l=a.join("_");t.indexOf(l)!==-1&&(e[l]=e[n],delete e[n])}}})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=o,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),a=o(6),s=r(a),l=o(11),u=r(l),p=o(12),c=r(p),_=o(13),f=r(_),d=o(9),y=r(d),h=o(7),b=r(h),g=o(8),O=r(g),m={SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview"},v=function(){function e(t,o){n(this,e),this.client=t,this.ALL_VALUES=o?(0,c["default"])(o):null,this.FLATTENED_VALUES=this.ALL_VALUES?(0,f["default"])(this.ALL_VALUES):null}return i(e,[{key:"_getModel",value:function(e,t,o,r){if(e.body)o||(0,b["default"])(e.body,t),r||(0,y["default"])(e.body,this.FLATTENED_VALUES);else{if(!e){t=t||this.ALL_VALUES;var n=t.join(", ");throw new Error("Please select from the following fields when making this API call: "+n)}o||(0,b["default"])(e,t),r||(0,y["default"])(e,this.FLATTENED_VALUES),e.body=(0,O["default"])(e,this.ALL_VALUES,r)}}},{key:"_objectifyString",value:function(e){if("string"==typeof e){var t=e;e={id:t}}return e}},{key:"_getId",value:function(e){var t="";return e.id?(t=e.id,delete e.id):"string"==typeof e&&(t=e,e={}),t}},{key:"_getFolderId",value:function(e){var t=this._getId(e);return e.folderId||e.folder_id?(t=e.folderId||e.folder_id,e.folderId?delete e.folderId:delete e.folder_id):e.folder&&e.folder.id&&(t=e.folder.id),this._testForMissingId(t,s["default"].FOLDER,s["default"].FOLDER_ID),t}},{key:"_getFileId",value:function(e){var t=this._getId(e);return e.fileId||e.file_id?(t=e.fileId||e.file_id,e.fileId?delete e.fileId:delete e.file_id):e.file&&e.file.id&&(t=e.file.id),this._testForMissingId(t,s["default"].FILE,s["default"].FILE_ID),t}},{key:"_getScope",value:function(e){var t="enterprise";return e.scope&&""!==e.scope&&(t=e.scope,delete e.scope),t}},{key:"_getTemplateKey",value:function(e){var t="";return e.template&&""!==e.template?(t=""!==e.template.key?e.template.key:e.template,delete e.template):(e.templateKey||e.template_key)&&(t=e.templateKey||e.template_key,e.templateKey?delete e.templateKey:delete e.template_key),t}},{key:"_testForMissingId",value:function(e,t,o){if(t=t||"unknown",o=o||"unknown",""===e)throw new Error("A(n) "+t+" field is required for this API call. Please provide an object with a key formatted in this style: "+o)}},{key:"_setSkipValidation",value:function(e){return(0,u["default"])(e,s["default"].MODES.SKIP_VALIDATION)||!1}},{key:"_setIgnoreModelValues",value:function(e){return(0,u["default"])(e,s["default"].MODES.IGNORE_MODEL_VALUES)||!1}},{key:"_createSharedLink",value:function(e,t,o,r){if(e=e||{},e.body=e.body||{},e.body.shared_link=e.body.shared_link||{},!this.client._simpleMode){var n=this._setSkipValidation(e),i=this._setIgnoreModelValues(e);i||(0,y["default"])(e,r),n||e[m.SHARED_LINK]&&(e.body[m.SHARED_LINK]=e[m.SHARED_LINK],delete e[m.SHARED_LINK])}var a=o+"/"+t;return e.method=s["default"].HTTP_VERBS.PUT,this.client.makeRequest(a,e)}}]),e}();t["default"]=v,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(12),i=r(n),a=o(6),s=r(a),l=(0,i["default"])(s["default"].MODES);t["default"]=function(e,t){var o=void 0;return l.indexOf(t)!==-1&&(o=e[t],delete e[t]),o},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return Object.keys(e).map(function(t){return e[t]})},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e=Array.prototype.concat.apply([],e.map(function(t){if(t.indexOf(".")!==-1){var o=t.split(".");return o.filter(function(t){return e.indexOf(t)===-1})}return t}))},e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function w(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:w(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=r(c),f=o(8),d=r(f),y=o(9),h=r(y),b=o(10),g=r(b),O=o(15),m=r(O),v=o(21),T=r(v),k="/files",E="lock",P="https://upload.box.com/api/2.0",S={NAME:"name",PARENT:"parent",ID:"parent.id",DESCRIPTION:"description",SHARED_LINK:"shared_link",SHARED_LINK_ACCESS:"shared_link.access",UNSHARED_AT:"shared_link.unshared_at",PERMISSIONS:"shared_link.permissions",CAN_DOWNLOAD:"shared_link.permissions.can_download",CAN_PREVIEW:"shared_link.permissions.can_preview",FOLDER_UPLOAD_EMAIL:"folder_upload_email",FOLDER_UPLOAD_EMAIL_ACCESS:"folder_upload_email.access",OWNED_BY:"owned_by",OWNED_BY_ID:"owned_by.id",SYNC_STATE:"sync_state",TAGS:"tags",SIZE:"size"},I={MIN_HEIGHT:"min_height",MAX_HEIGHT:"max_height",MIN_WIDTH:"min_width",MAX_WIDTH:"max_width"},j=Object.keys(I).map(function(e){return I[e]}),A=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S))}return a(t,e),s(t,[{key:"_getVersionId",value:function(e){var o=void 0;return(e.versionId||e.version_id)&&(o=e.versionId||e.version_id,e.versionId?delete e.versionId:e.version_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,p["default"].VERSION,p["default"].VERSION_ID),o}},{key:"_getFile",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.file?(r||(0,_["default"])(e.file,o),n||(0,h["default"])(e.file,this.FLATTENED_VALUES),e.body=(0,d["default"])(e.file,this.ALL_VALUES,n),delete e.file):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getDownloadUrl",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.params.fields=e.params.fields?e.params.fields:e.fields,e.params.fields=e.params.fields.concat(",download_url")):e.params={fields:"download_url"};var r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"upload",value:function(e){return e=e||{},e.url=e.url||P+"/files/content",e.method=p["default"].HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadNewFileVersion",value:function(e){if(!(0,T["default"])())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var t=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id");return e.url=e.url||P+"/files/"+t+"/content",e.method=p["default"].HTTP_VERBS.POST,e.upload=!0,this.client.makeRequest(null,e)}},{key:"uploadWithPreflightAndMd5",value:function(e){var t=this;e=e||{};var o=e.file,r=e.body,n={name:e.name,parent:e.parent,size:e.file.size},i=JSON.parse(JSON.stringify(e));return this.preflightCheck(n).then(function(e){e.upload_url&&(i.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,m["default"])(o)}).then(function(e){return i.headers=i.headers||{},i.body=r,delete i.file,i.headers["Content-MD5"]=e,t.upload(i)})}},{key:"uploadNewFileVersionWithPreflighAndMd5",value:function(e){var t=this;if(!(0,T["default"])())throw new Error("Form Data not supported. The uploadNewFileVersion requires Form Data in the browser.");e=e||{};var o=e.file,r=e.body,n=JSON.parse(JSON.stringify(e));return e.fileId=e.body.get("id")||e.body.get("fileId")||e.body.get("file_id"),this.preflightCheckNewFileVersion(e).then(function(e){e.upload_url&&(n.url=e.upload_url)}).then(function(){if(void 0===o)throw new Error("Couldn't access file...");return(0,m["default"])(o)}).then(function(e){return n.headers=n.headers||{},n.body=r,delete n.file,n.headers["Content-MD5"]=e,t.uploadNewFileVersion(n)})}},{key:"preflightCheck",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[S.SIZE,S.NAME],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,o,r,n)}var i=k+"/content";return e.method=p["default"].HTTP_VERBS.OPTIONS,this.client.makeRequest(i,e)}},{key:"preflightCheckNewFileVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=[S.SIZE,S.NAME],n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,r,n,i)}var a=k+"/"+o+"/content";return e.method=p["default"].HTTP_VERBS.OPTIONS,this.client.makeRequest(a,e)}},{key:"update",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.url=e.url||P+"/"+o+"/content",this.upload(e)}},{key:"getComments",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o+"/comments";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTasks",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o+"/tasks";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getEmbedLink",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.params=e.params||{},e.fields||e.params.fields?(e.fields&&(e.params.fields=e.fields,delete e.fields),e.params.fields=e.params.fields.concat(",expiring_embed_link")):e.params.fields="expiring_embed_link";var r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getVersions",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o+"/versions";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getThumbnail",value:function(e){e=e||{},e.extension=e.extension||".png",e.params=e.params||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);Object.keys(e).map(function(t){j.indexOf(t)!==-1&&(e.params[t]=e[t],delete e[t])});var r=k+"/"+o+"/thumbnail"+e.extension;return delete e.extension,e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTrashedFile",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createSharedLink",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createSharedLink",this).call(this,e,o,k,this.FLATTENED_VALUES)}},{key:"promoteVersion",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.id){var r=this._getVersionId(e);e.body.id=r}e.body.type="file_version";var n=k+"/"+o+"/versions/current";return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"copy",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!e.body.parent&&!e.body.parent.id)if(e.body.parent={},e.id)e.body.parent.id=e.id,delete e.id;else{if(!e.parentId)throw new Error("A parentId or id is required for this API call.");
e.body.parent.id=e.parentId,delete e.parentId}e.name?(e.body.name=e.name,delete e.name):e.newName&&(e.body.name=e.newName,delete e.newName);var r=k+"/"+o+"/copy";return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"updateInfo",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getFile(e,[],r,n)}var i=k+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"lock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[E]?(e.body[E]=e[E],e.body[E].type=E,delete e[E]):e.body.lock={type:E};var r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"unlock",value:function(e){e=e||{},e.body=e.body||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e[E]&&delete e[E],e.body[E]=null;var r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(r,e)}},{key:"restore",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e);e.parent&&(e.body=e.body||{},e.body.parent=e.parent,delete e.parent),e.name&&(e.body=e.body||{},e.body.name=e.name,delete e.name);var r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(r,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}},{key:"deleteVersion",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=this._getVersionId(e),n=k+"/"+o+"/versions/"+r;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(n,e)}},{key:"permanentlyDelete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=k+"/"+o+"/trash";return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(g["default"]);t["default"]=A,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(16),i=r(n),a=o(17),s=(r(a),o(18)),l=(r(s),o(19)),u=r(l),p=o(20),c=r(p);t["default"]=function(e){return new Promise(function(t,o){(0,c["default"])()||o(new Error("FileReader isn't usable in this browser.")),(0,u["default"])(e)||o(new Error("File object not detected."));try{var r=i["default"].algo.SHA1.create(),n=0,a=1048576,s=void 0,l=new FileReader;l.readAsArrayBuffer(e.slice(n,n+a)),l.onload=function(o){var u=i["default"].lib.WordArray.create(o.target.result);if(r.update(u),n+=a,n<e.size)s=e.slice(n,n+a),l.readAsArrayBuffer(s);else{var p=r.finalize(),c=p.toString(i["default"].enc.Hex);t(c)}}}catch(p){o(p)}})},e.exports=t["default"]},function(e,t,o){!function(o,r){e.exports=t=r()}(this,function(){var e=e||function(e,t){var o=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),r={},n=r.lib={},i=n.Base=function(){return{extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=n.WordArray=i.extend({init:function(e,o){e=this.words=e||[],o!=t?this.sigBytes=o:this.sigBytes=4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,o=e.words,r=this.sigBytes,n=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<n;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var i=0;i<n;i+=4)t[r+i>>>2]=o[i>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,r=[],n=function(t){var t=t,o=987654321,r=4294967295;return function(){o=36969*(65535&o)+(o>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var n=(o<<16)+t&r;return n/=4294967296,n+=.5,n*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=n(4294967296*(o||e.random()));o=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],n=0;n<o;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r+=2)o[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(o,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,r=[],n=0;n<o;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,o=[],r=0;r<t;r++)o[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(o,t)}},p=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},c=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,r=o.words,n=o.sigBytes,i=this.blockSize,s=4*i,l=n/s;l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);var u=l*i,p=e.min(4*u,n);if(u){for(var c=0;c<u;c+=i)this._doProcessBlock(r,c);var _=r.splice(0,u);o.sigBytes-=p}return new a.init(_,p)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(n.Hasher=c.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new _.HMAC.init(e,o).finalize(t)}}}),r.algo={});return r}(Math);return e})},function(e,t,o){!function(r,n){e.exports=t=n(o(16))}(this,function(e){return function(){var t=e,o=t.lib,r=o.WordArray,n=o.Hasher,i=t.algo,a=[],s=i.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,r=o[0],n=o[1],i=o[2],s=o[3],l=o[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var p=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=p<<1|p>>>31}var c=(r<<5|r>>>27)+l+a[u];c+=u<20?(n&i|~n&s)+1518500249:u<40?(n^i^s)+1859775393:u<60?(n&i|n&s|i&s)-1894007588:(n^i^s)-899497514,l=s,s=i,i=n<<30|n>>>2,n=r,r=c}o[0]=o[0]+r|0,o[1]=o[1]+n|0,o[2]=o[2]+i|0,o[3]=o[3]+s|0,o[4]=o[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(o/4294967296),t[(r+64>>>9<<4)+15]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=n._createHelper(s),t.HmacSHA1=n._createHmacHelper(s)}(),e.SHA1})},function(e,t,o){!function(r,n){e.exports=t=n(o(16))}(this,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,o=t.lib,r=o.WordArray,n=r.init,i=r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,o=[],r=0;r<t;r++)o[r>>>2]|=e[r]<<24-r%4*8;n.call(this,o,t)}else n.apply(this,arguments)};i.prototype=r}}(),e.lib.WordArray})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.constructor===File&&"string"==typeof e.name},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return!!(window&&window.FileReader||FileReader)},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return!!(window&&window.FormData||FormData)},e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function T(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:T(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=r(c),f=o(8),d=r(f),y=o(9),h=r(y),b=o(10),g=r(b),O="/web_links",m={URL:"url",PARENT:"parent",ID:"parent.id",NAME:"name",DESCRIPTION:"description"},v=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m));return o.client=e,o}return a(t,e),s(t,[{key:"_getWebLinkId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link&&e.web_link.id?o=e.web_link.id:(e.webLinkId||e.web_link_id)&&(o=e.webLinkId||e.web_link_id,e.webLinkId?delete e.webLinkId:delete e.web_link_id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getWebLink",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.webLink&&(e.web_link=e.webLink,delete e.webLink),e.web_link?(r||(0,_["default"])(e.webLink,o),n||(0,h["default"])(e.webLink,this.FLATTENED_VALUES),e.body=(0,d["default"])(e.webLink,this.ALL_VALUES),delete e.web_link):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getWebLinkId(e),r=O+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var t=[ALL_VALUES.URL,ALL_VALUES.PARENT,ALL_VALUES.ID],o=InvestigateModes(e,p["default"].MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,p["default"].MODES.IGNORE_MODEL_VALUES)||!1;this.client._returnsOnlyOptions||this._getWebLink(e,t,o,r)}var n=""+O;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(n,e)}},{key:"update",value:function(e){e=e||{};var t=this._getWebLinkId(e);if(!this.client._simpleMode){var o=InvestigateModes(e,p["default"].MODES.SKIP_VALIDATION)||!1,r=InvestigateModes(e,p["default"].MODES.IGNORE_MODEL_VALUES)||!1;this._getWebLink(e,[],o,r)}var n=O+"/"+t;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(n,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getWebLinkId(e),o=O+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(g["default"]);t["default"]=v,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function h(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:h(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(10),_=r(c),f="/collaborations",d={NOTIFY:"notify",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACCESSIBLE_BY:"accessible_by",ACCESSIBLE_BY_ID:"accessible_by.id",ACCESSIBLE_BY_TYPE:"accessible_by.type",ACCESSIBLE_BY_LOGIN:"accessible_by.login",ROLE:"role"},y=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return a(t,e),s(t,[{key:"_getCollaborationId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collaborationId||e.collaboration_id?(o=e.collaborationId||e.collaboration_id,e.collaborationId?delete e.collaborationId:delete e.collaboration_id):e.collaboration&&e.collaboration.id&&(o=e.collaboration.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getCollaboration",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.collaboration?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.collaboration,o),n||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.collaboration,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,n),delete e.collaboration):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollaborationId(e),r=f+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[d.ITEM,d.ITEM_ID,d.ITEM_TYPE,d.ACCESSIBLE_BY,d.ROLE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,o,r,n)}var i=""+f;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"update",value:function(e){e=e||{};var o=this._getCollaborationId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getCollaboration(e,[],r,n)}var i=f+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getCollaborationId(e),o=f+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(_["default"]);t["default"]=y,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function h(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:h(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(10),_=r(c),f="/collections",d={},y=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return a(t,e),s(t,[{key:"_getCollectionId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.collectionId||e.collection_id?(o=e.collectionId||e.collection_id,e.collectionId?delete e.collectionId:delete e.collection_id):e.collection&&e.collection.id&&(o=e.collection.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCollectionId(e),r=f+"/"+o+"/items";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};var t=""+f;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(_["default"]);t["default"]=y,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function h(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:h(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(10),_=r(c),f="/comments",d={ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",TAGGED_MESSAGE:"tagged_message",MESSAGE:"message"},y=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d))}return a(t,e),s(t,[{key:"_getCommentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.commentId||e.comment_id?(o=e.commentId||e.comment_id,e.commentId?delete e.commentId:delete e.comment_id):e.comment&&e.comment.id&&(o=e.comment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o,p["default"].COMMENT,p["default"].COMMENT_ID),o}},{key:"_getComment",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.comment?(r||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"VerifyRequiredValues",this).call(this,e.comment,o),n||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"NormalizeObjectKeys",this).call(this,e.comment,this.FLATTENED_VALUES),e.body=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"CreateRequestBody",this).call(this,e.comment,this.ALL_VALUES,n),delete e.comment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCommentId(e),r=f+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[d.ITEM,d.ITEM_ID,d.ITEM_TYPE,d.MESSAGE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,o,r,n)}var i=""+f;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"update",value:function(e){e=e||{};var o=this._getCommentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getComment(e,[d.MESSAGE],r,n)}var i=f+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getCommentId(e),r=f+"/"+o;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(r,e)}}]),t}(_["default"]);t["default"]=y,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function v(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:v(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=r(c),f=o(9),d=r(f),y=o(10),h=r(y),b="/groups",g="/group_memberships",O={NAME:"name",PROVENANCE:"provenance",EXTERNAL_SYNC_IDENTIFIER:"external_sync_identifier",DESCRIPTION:"description",INVITABILITY_LEVEL:"invitability_level",MEMBER_VIEWABILITY_LEVEL:"member_viewability_level",USER:"user",USER_ID:"user.id",GROUP:"group",GROUP_ID:"group.id",ROLE:"role"},m=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,O))}return a(t,e),s(t,[{key:"_getGroupId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupId||e.group_id?(o=e.groupId||e.group_id,e.groupId?delete e.groupId:delete e.group_id):e.group&&e.group.id&&(o=e.group.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroupMembershipId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.groupMembershipId||e.group_membership_id?(o=e.groupMembershipId||e.group_membership_id,e.groupMembershipId?delete e.groupMembershipId:delete e.group_membership_id):(e.groupMembership&&e.groupMembership.id||e.group_membership&&e.group_membership.id)&&(o=e.groupMembership.id||e.group_membership.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getGroup",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.group?(r||(0,_["default"])(e.group,o),n||(0,d["default"])(e.group,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group,this.ALL_VALUES,n),delete e.group):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"_getGroupMembership",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.groupMembership&&(e.group_membership=e.groupMembership,delete e.groupMembership),e.group_membership?(r||(0,_["default"])(e.group_membership,o),n||(0,d["default"])(e.group_membership,this.FLATTENED_VALUES),e.body=CreateRequestBody(e.group_membership,this.ALL_VALUES,n),delete e.group_membership):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupId(e),r=b+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getAll",value:function(e){e=e||{};var t=""+b;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"update",value:function(e){e=e||{};var o=this._getGroupId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroup(e,[],r,n)}var i=b+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"getMembership",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getGroupMembershipId(e),r=g+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"updateMembership",value:function(e){e=e||{};var o=this._getGroupMembershipId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getGroupMembership(e,[],r,n)}var i=g+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"deleteMembership",value:function(e){e=e||{};var t=this._getGroupMembershipId(e),o=g+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getMembershipsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o=b+"/"+t+"/memberships";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"getCollaborationsForGroup",value:function(e){e=e||{};var t=this._getGroupId(e),o=b+"/"+t+"/collaborations";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}}]),t}(h["default"]);t["default"]=m,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function v(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:v(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=(r(c),o(8)),f=(r(_),o(9)),d=(r(f),o(10)),y=r(d),h="/metadata_templates",b="/folders",g="/files",O={},m=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,O))}return a(t,e),s(t,[{key:"get",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),n=h+"/"+o+"/"+r+"/schema";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(n,e)}},{key:"getTemplates",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),r=h+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=b+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(i,e)}},{key:"getAllFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=b+"/"+o+"/metadata";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=g+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(i,e)}},{key:"getAllFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=g+"/"+o+"/metadata";
return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"createFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=b+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(i,e)}},{key:"createFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=g+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.POST,e.headers=e.headers||{},e.headers["Content-Type"]="application/json",this.client.makeRequest(i,e)}},{key:"updateFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=g+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(i,e)}},{key:"updateFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=b+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.PUT,e.headers=e.headers||{},e.headers["Content-Type"]="application/json-patch+json",this.client.makeRequest(i,e)}},{key:"deleteFolderMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFolderId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=b+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(i,e)}},{key:"deleteFileMetadata",value:function(e){e=e||{};var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getFileId",this).call(this,e),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getScope",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTemplateKey",this).call(this,e),i=g+"/"+o+"/metadata/"+r+"/"+n;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(i,e)}}]),t}(y["default"]);t["default"]=m,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(10),u=r(l),p=o(6),c=r(p),_="/search",f={},d=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f))}return a(t,e),s(t,[{key:"_objectifyStringWithQuery",value:function(e){if("string"==typeof e){var t=e;e={query:t}}return e}},{key:"_getQuery",value:function(e){var t="query",o="";if(!e.query&&!e.params.query)throw new Error("An "+t+" field is required for this API call. Please provide an object with a key formatted in this style: "+t);return e.params=e.params||{},o=e.query||e.params.query,e.query&&delete e.query,e.params.query=o,e}},{key:"search",value:function(e){e=this._objectifyStringWithQuery(e)||{},e=this._getQuery(e);var t=""+_;return e.method=c["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(u["default"]);t["default"]=d,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=function k(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:k(n,t,o)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(o)},u=o(6),p=r(u),c=o(7),_=r(c),f=o(8),d=r(f),y=o(9),h=r(y),b=o(10),g=r(b),O="/tasks",m="/task_assignments",v={TASK:"task",TASK_TYPE:"task.type",TASK_ID:"task.id",ASSIGN_TO:"assign_to",ASSIGN_TO_ID:"assign_to.id",ASSIGN_TO_LOGIN:"assign_to.login",RESOLUTION_STATE:"resolution_state",ITEM:"item",ITEM_TYPE:"item.type",ITEM_ID:"item.id",ACTION:"action",MESSAGE:"message",DUE_AT:"due_at"},T=function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,v));return o.client=e,o}return a(t,e),s(t,[{key:"_getTaskId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskId||e.task_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task&&e.task.id&&(o=e.task.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTaskAssignmentId",value:function(e){var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getId",this).call(this,e);return e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.taskAssignmentId||e.task_assignment_id?(o=e.taskId||e.task_id,e.taskId?delete e.taskId:delete e.task_id):e.task_assignment&&e.task_assignment.id&&(o=e.task_assignment.id),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_testForMissingId",this).call(this,o),o}},{key:"_getTask",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.task?(r||(0,_["default"])(e.task,o),n||(0,h["default"])(e.task,this.FLATTENED_VALUES),e.body=(0,d["default"])(e.task,this.ALL_VALUES,n),delete e.task):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"_getTaskAssignment",value:function(e,o,r,n){r=r||this.client.skipValidation||!1,n=n||!1,e.taskAssignment&&(e.task_assignment=e.taskAssignment,delete e.taskAssignment),e.task_assignment?(r||(0,_["default"])(e.task_assignment,o),n||(0,h["default"])(e.task_assignment,this.FLATTENED_VALUES),e.body=(0,d["default"])(e.task_assignment,this.ALL_VALUES,n),delete e.task_assignment):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getModel",this).call(this,e,o,r,n)}},{key:"get",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskId(e),r=O+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"create",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[v.ITEM,v.ITEM_ID,v.ITEM_TYPE],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,o,r,n)}var i=""+O;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"update",value:function(e){e=e||{};var o=this._getTaskId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTask(e,[],r,n)}var i=O+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"delete",value:function(e){e=e||{};var t=this._getTaskId(e),o=O+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}},{key:"getTaskAssignment",value:function(e){e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_objectifyString",this).call(this,e)||{};var o=this._getTaskAssignmentId(e),r=m+"/"+o;return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(r,e)}},{key:"getTaskAssignments",value:function(e){e=e||{};var t=this._getTaskId(e),o=O+"/"+t+"/assignments";return e.method=p["default"].HTTP_VERBS.GET,this.client.makeRequest(o,e)}},{key:"createTaskAssignment",value:function(e){if(e=e||{},!this.client._simpleMode){var o=[v.TASK,v.TASK_TYPE,v.TASK_ID,v.ASSIGN_TO],r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,o,r,n)}var i=""+m;return e.method=p["default"].HTTP_VERBS.POST,this.client.makeRequest(i,e)}},{key:"updateTaskAssignment",value:function(e){e=e||{};var o=this._getTaskAssignmentId(e);if(!this.client._simpleMode){var r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setSkipValidation",this).call(this,e),n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setIgnoreModelValues",this).call(this,e);this._getTaskAssignment(e,[],r,n)}var i=m+"/"+o;return e.method=p["default"].HTTP_VERBS.PUT,this.client.makeRequest(i,e)}},{key:"deleteTaskAssignment",value:function(e){e=e||{};var t=this._getTaskAssignmentId(e),o=m+"/"+t;return e.method=p["default"].HTTP_VERBS.DELETE,this.client.makeRequest(o,e)}}]),t}(g["default"]);t["default"]=T,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),l=o(6),u=r(l),p=o(7),c=(r(p),o(9)),_=(r(c),o(10)),f=r(_),d="/users",y={},h=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,y))}return a(t,e),s(t,[{key:"getCurrentUser",value:function(e){e=e||{};var t=d+"/me";return e.method=u["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}},{key:"getGroupMemberships",value:function(e){e=e||{};var t=d+"/"+userId+"/memberships";return e.method=u["default"].HTTP_VERBS.GET,this.client.makeRequest(t,e)}}]),t}(f["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),u=o(4),p=r(u),c=o(6),_=r(c),f=function(e){function t(e){n(this,t),e=e||{};var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._tokenExpirationTime=e.tokenExpirationTime||27e5,o.accessTokenHandler=o._checkConfigForAccessTokenHandler(e),o.accessTokenStore=o._defaultAccessTokenStore(),o.storage=e.storage||"localStorage",o.disableStorage=e.disableStorage||!1,o.isCallback=e.isCallback||!1,o.isPromise=e.isPromise||!0,o.requestRetryTimes=e.retryTimes||3,o.supportsStorage=o._storageAvailable(o.storage),o.suppressExpiration=e.suppressExpiration||!1,o}return a(t,e),l(t,[{key:"_checkConfigForAccessTokenHandler",value:function(e){if("object"===("undefined"==typeof e?"undefined":s(e))&&(e.accessTokenHandler||e.access_token_handler))return e.accessTokenObject=e.accessTokenHandler||e.access_token_handler,e.accessTokenObject;throw new Error("An accessTokenHandler is required to create a PersisentBoxClient. Please provide a callback function or promise that resolves to an access token")}},{key:"_storageAvailable",value:function(e){try{var t=window[e],o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(r){return!1}}},{key:"_verifyAccessTokenObject",value:function(e){var t={};return"string"==typeof e?(t.accessToken=e,this.suppressExpiration||(t.expiresAt=this._calculateTokenExpiration()),t):("object"===("undefined"==typeof e?"undefined":s(e))&&(e.accessToken||e.access_token)&&(t.accessToken=e.accessToken||e.access_token),"object"!==("undefined"==typeof e?"undefined":s(e))||this.suppressExpiration||!e.expiresAt&&!e.expires_at||(t.expiresAt=e.expiresAt||e.expires_at),this.suppressExpiration||t.expiresAt||(t.expiresAt=this._calculateTokenExpiration()),t)}},{key:"_calculateTokenExpiration",value:function(){return Date.now()+this._tokenExpirationTime}},{key:"_promisifyAccessTokenHandler",value:function(e){if("function"==typeof e&&this.isCallback)return new this.Promise(function(t,o){e(function(e,r){e&&o(e),r?t(r):o("Couldn't retrieve a new token.")})});if("function"==typeof e&&this.isPromise){var t=e();if("object"===("undefined"==typeof t?"undefined":s(t))&&"then"in t)return t;throw new Error("accessTokenHandler must resolve to a function or promise")}throw new Error("accessTokenHandler must resolve to a function or promise")}},{key:"_defaultAccessTokenStore",value:function(){var e=this;return this._accessToken=function(){return e.supportsStorage&&!e.disableStorage?new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),window[e.storage].setItem(_["default"].BOX_TOKEN_STORAGE_KEY,JSON.stringify(o)),t(o)})}):new e.Promise(function(t,o){return e._promisifyAccessTokenHandler(e.accessTokenHandler).then(function(o){o=e._verifyAccessTokenObject(o),t(o)})})},{accessToken:this._accessToken}}},{key:"_isExpired",value:function(e){var t=e.expires_at||e.expiresAt;return t<Date.now()}},{key:"retrieveToken",value:function(e){if(this.supportsStorage&&!this.disableStorage){var t=window[this.storage].getItem(_["default"].BOX_TOKEN_STORAGE_KEY);return t=t?JSON.parse(t):null,t&&!this._isExpired(t)&&0===e?new this.Promise(function(e,o){e(t)}):(window[this.storage].removeItem(_["default"].BOX_TOKEN_STORAGE_KEY),this.accessTokenStore.accessToken())}return this.accessTokenStore.accessToken()}},{key:"reauth",value:function(e,t,o){var r=this;return this.retrieveToken(o).then(function(o){var n=t.headers||{};n[_["default"].HEADER_AUTHORIZATION]="Bearer "+o.accessToken,t=t||{};var i=Object.assign({},t);return i.url=t.url||""+r._baseApiUrl+e,i.headers=n,i.params=r._applyFields(t),r._checkForEmptyObjects(i),i=r._formatOptions(i)})}},{key:"makeRequest",value:function(e,t,o){var r=this;if(o=o||0,o>this.requestRetryTimes)throw new Error("Exceeded retry count.");return this.reauth(e,t,o).then(function(n){return r._returnsOnlyOptions?(n.upload&&(n.headers["Content-Type"]=void 0,delete n.upload),n):r.httpService.defaults&&t.upload?r._handleAngularFileUpload(r.httpService,n):r.httpService(n)["catch"](function(n){var i=n.status||n.response.status;if(void 0===i||i<=0)return r.supportsStorage&&!r.disableStorage&&window[r.storage].removeItem(_["default"].BOX_TOKEN_STORAGE_KEY),r.makeRequest(e,t,o+1);throw n})})}}]),t}(p["default"]);t["default"]=f,e.exports=t["default"]}])});
//# sourceMappingURL=BoxSdk.map